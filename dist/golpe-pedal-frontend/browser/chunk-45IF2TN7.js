import{a as o,b as i,d as n,k as c}from"./chunk-YAXSTRSO.js";var d=class e{claveLocalStorage="carrito";contadorSubject=new n(this.obtenerCantidadTotal());contador$=this.contadorSubject.asObservable();agregarProducto(t){let r=this.obtenerCarrito(),a=r.findIndex(s=>s.id===t.id);a>-1?r[a].cantidad+=1:r.push(i(o({},t),{cantidad:1})),localStorage.setItem(this.claveLocalStorage,JSON.stringify(r)),this.actualizarContador()}obtenerCarrito(){let t=localStorage.getItem(this.claveLocalStorage);return t?JSON.parse(t):[]}eliminarProducto(t){let r=this.obtenerCarrito().filter(a=>a.id!==t);localStorage.setItem(this.claveLocalStorage,JSON.stringify(r)),this.actualizarContador()}vaciarCarrito(){localStorage.removeItem(this.claveLocalStorage),this.actualizarContador()}refrescarContador(){this.contadorSubject.next(this.obtenerCantidadTotal())}obtenerCantidadTotal(){return this.obtenerCarrito().reduce((t,r)=>t+r.cantidad,0)}actualizarContador(){this.refrescarContador()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};export{d as a};
