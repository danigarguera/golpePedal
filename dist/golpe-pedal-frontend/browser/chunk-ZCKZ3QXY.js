import{a as g}from"./chunk-IN4BUU5G.js";import{a as S,b as p,c as y,d as E,g as x,h as B,i as M,j as w,n as D,s as F,u as R}from"./chunk-ND65VQ52.js";import{B as l,Ba as v,C as s,Da as C,Ea as h,Ha as I,Ia as N,J as d,M as t,N as i,O as o,S as u,W as r,ua as b,ya as f,z as m}from"./chunk-YAXSTRSO.js";var j=class c{constructor(e,a,n,z,A){this.fb=e;this.route=a;this.router=n;this.componentesService=z;this.http=A}formulario;id;tipoComponenteNombre="";marcaNombre="";tipoBicicletaNombre="";apiUrl=N.apiUrl;ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.formulario=this.fb.group({nombre:[{value:"",disabled:!0},p.required],descripcion:[{value:"",disabled:!0},p.required],precio:[0,[p.required,p.min(.01)]],tipoComponenteId:[""],marcaId:[""],tipoBicicletaId:[""]}),this.componentesService.obtenerPorId(this.id).subscribe({next:e=>{console.log("\u{1F4E6} Componente cargado:",e),this.formulario.patchValue({nombre:e.nombre,descripcion:e.descripcion,precio:e.precio,tipoComponenteId:e.tipoComponenteId,marcaId:e.marcaId,tipoBicicletaId:e.tipoBicicletaId}),this.tipoComponenteNombre=e.tipo??"",this.marcaNombre=e.marca??"",this.tipoBicicletaNombre=e.tipoBicicleta??""},error:()=>this.router.navigate(["/dashboard/componentes"])})}guardar(){if(this.formulario.invalid)return;let e=this.formulario.getRawValue(),a={id:this.id,nombre:e.nombre,descripcion:e.descripcion,precio:e.precio,tipoComponenteId:e.tipoComponenteId,marcaId:e.marcaId,tipoBicicletaId:e.tipoBicicletaId};this.componentesService.actualizarComponente(this.id,a).subscribe({next:()=>this.router.navigate(["/dashboard/componentes"]),error:n=>console.error("Error al actualizar componente:",n)})}static \u0275fac=function(a){return new(a||c)(l(F),l(v),l(C),l(g),l(f))};static \u0275cmp=s({type:c,selectors:[["app-modificar-componente"]],decls:40,vars:5,consts:[[1,"container","mt-4","d-flex","justify-content-center"],[1,"w-100",2,"max-width","640px"],[1,"mb-4","texto-grande","fw-bold"],[1,"bi","bi-pencil-square","me-2"],[1,"bg-white","p-4","rounded-3","sombra-suave","borde-claro",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label","fw-semibold"],["id","nombre","type","text","formControlName","nombre","readonly","",1,"form-control","input-estilizado"],["for","descripcion",1,"form-label","fw-semibold"],["id","descripcion","rows","3","formControlName","descripcion","readonly","",1,"form-control","input-estilizado"],["for","precio",1,"form-label","fw-semibold"],["id","precio","type","number","formControlName","precio","min","0.01","step","0.01",1,"form-control","input-estilizado"],["type","hidden","formControlName","tipoComponenteId"],["type","hidden","formControlName","marcaId"],["type","hidden","formControlName","tipoBicicletaId"],[1,"form-label","fw-semibold"],["readonly","",1,"form-control","input-estilizado",3,"value"],[1,"d-flex","justify-content-between","mt-4"],["type","submit",1,"btn","btn-secundario","btn-sm",3,"disabled"],[1,"bi","bi-check2-circle","me-1"],["routerLink","/dashboard/componentes",1,"btn","btn-outline-dark","btn-sm"],[1,"bi","bi-x-circle","me-1"]],template:function(a,n){a&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"i",3),r(4,"Editar Componente "),i(),t(5,"form",4),u("ngSubmit",function(){return n.guardar()}),t(6,"div",5)(7,"label",6),r(8,"Nombre"),i(),o(9,"input",7),i(),t(10,"div",5)(11,"label",8),r(12,"Descripci\xF3n"),i(),o(13,"textarea",9),i(),t(14,"div",5)(15,"label",10),r(16,"Precio (\u20AC)"),i(),o(17,"input",11),i(),o(18,"input",12)(19,"input",13)(20,"input",14),t(21,"div",5)(22,"label",15),r(23,"Tipo de Componente"),i(),o(24,"input",16),i(),t(25,"div",5)(26,"label",15),r(27,"Marca"),i(),o(28,"input",16),i(),t(29,"div",5)(30,"label",15),r(31,"Tipo de Bicicleta"),i(),o(32,"input",16),i(),t(33,"div",17)(34,"button",18),o(35,"i",19),r(36,"Actualizar "),i(),t(37,"a",20),o(38,"i",21),r(39,"Cancelar "),i()()()()()),a&2&&(m(5),d("formGroup",n.formulario),m(19),d("value",n.tipoComponenteNombre),m(4),d("value",n.marcaNombre),m(4),d("value",n.tipoBicicletaNombre),m(2),d("disabled",n.formulario.invalid))},dependencies:[b,R,x,S,B,y,E,D,M,w,I,h],encapsulation:2})};export{j as ModificarComponenteComponent};
