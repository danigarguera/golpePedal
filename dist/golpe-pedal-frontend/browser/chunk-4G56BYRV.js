import{a as A}from"./chunk-NBXJKE54.js";import{a as P}from"./chunk-IN4BUU5G.js";import"./chunk-4GUMZMTI.js";import{a as T}from"./chunk-45IF2TN7.js";import{Ba as w,C as I,G as b,Ha as M,Ia as O,J as l,M as t,N as n,O as m,R as x,S as v,T as d,W as o,Y as p,ga as E,ha as h,o as s,q as u,r as f,ra as S,ta as y,ua as D,v as C,y as _,z as r}from"./chunk-YAXSTRSO.js";function V(i,a){if(i&1){let e=x();t(0,"img",21),v("error",function(){u(e);let g=d(2);return f(g.marcarImagenComoFallida())}),n()}if(i&2){let e=d(2);l("src",e.apiUrl+"/componentes/"+e.componente.id+"/imagen",_)}}function F(i,a){i&1&&m(0,"img",22)}function N(i,a){if(i&1){let e=x();t(0,"div",4)(1,"div",5)(2,"div",6),b(3,V,1,1,"img",7)(4,F,1,0,"img",8),n(),t(5,"div",9)(6,"h2",10),m(7,"i",11),o(8),n(),t(9,"ul",12)(10,"li",13),m(11,"i",14),t(12,"strong"),o(13,"ID:"),n(),o(14),n(),t(15,"li",13),m(16,"i",15),t(17,"strong"),o(18,"Tipo:"),n(),o(19),n(),t(20,"li",13),m(21,"i",16),t(22,"strong"),o(23,"Marca:"),n(),o(24),n(),t(25,"li",13),m(26,"i",17),t(27,"strong"),o(28,"Descripci\xF3n:"),n(),o(29),n(),t(30,"li",13),m(31,"i",18),t(32,"strong"),o(33,"Precio:"),n(),o(34),E(35,"currency"),n(),t(36,"button",19),v("click",function(){u(e);let g=d();return f(g.agregarAlCarrito())}),m(37,"i",20),o(38," A\xF1adir al carrito "),n()()()()()}if(i&2){let e=d();r(3),l("ngIf",e.componente&&!e.imagenError),r(),l("ngIf",e.imagenError),r(4),p(" ",e.componente.nombre," "),r(6),p(" ",e.componente.id," "),r(5),p(" ",e.componente.tipo," "),r(5),p(" ",e.componente.marca," "),r(5),p(" ",e.componente.descripcion||"No disponible"," "),r(5),p(" ",h(35,9,e.componente.precio,"EUR")," "),r(2),l("disabled",!e.componente)}}function k(i,a){i&1&&(t(0,"div",23),m(1,"i",24),o(2," Cargando componente... "),n())}function R(i,a){if(i&1&&(t(0,"div",25),m(1,"i",26),o(2),n()),i&2){let e=d();r(2),p(" ",e.error," ")}}var U=class i{componente=null;error="";apiUrl=O.apiUrl;imagenError=!1;bannerVisible=!1;appComponent=s(A);componentesService=s(P);route=s(w);carritoService=s(T);productoA\u00F1adido=new C;ngOnInit(){let a=this.route.snapshot.paramMap.get("id");a?this.componentesService.obtenerEntidadPorId(+a).subscribe({next:e=>this.componente=e,error:e=>{console.error("\u274C Error al cargar componente:",e),this.error="No se pudo cargar el componente."}}):this.error="ID inv\xE1lido"}marcarImagenComoFallida(){this.imagenError=!0}agregarAlCarrito(){this.componente&&(this.carritoService.agregarProducto({id:this.componente.id,nombre:this.componente.nombre,precio:this.componente.precio,imagenUrl:`${this.apiUrl}/componentes/${this.componente.id}/imagen`}),this.appComponent.mostrarBannerCarrito())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=I({type:i,selectors:[["app-detalle-componente"]],outputs:{productoA\u00F1adido:"productoA\xF1adido"},decls:4,vars:3,consts:[[1,"container","py-4"],["class","sombra-suave borde-claro p-4 rounded-3 bg-white",4,"ngIf"],["class","alert alert-info mt-4",4,"ngIf"],["class","alert alert-danger mt-4",4,"ngIf"],[1,"sombra-suave","borde-claro","p-4","rounded-3","bg-white"],[1,"row","g-4","align-items-start"],[1,"col-md-5"],["alt","Imagen del componente","class","img-fluid rounded border",3,"src","error",4,"ngIf"],["src","assets/img/imagen-no-disponible.webp","alt","Imagen por defecto","class","img-fluid rounded border",4,"ngIf"],[1,"col-md-7"],[1,"fw-bold","mb-3","texto-grande","d-flex","align-items-center","gap-2"],[1,"bi","bi-box","text-secondary"],[1,"list-unstyled"],[1,"mb-2"],[1,"bi","bi-hash","text-muted","me-2"],[1,"bi","bi-cpu","text-muted","me-2"],[1,"bi","bi-tools","text-muted","me-2"],[1,"bi","bi-card-text","text-muted","me-2"],[1,"bi","bi-tag","text-muted","me-2"],[1,"btn","btn-secundario","mt-3",3,"click","disabled"],[1,"bi","bi-cart-plus","me-1"],["alt","Imagen del componente",1,"img-fluid","rounded","border",3,"error","src"],["src","assets/img/imagen-no-disponible.webp","alt","Imagen por defecto",1,"img-fluid","rounded","border"],[1,"alert","alert-info","mt-4"],[1,"bi","bi-hourglass-split","me-2"],[1,"alert","alert-danger","mt-4"],[1,"bi","bi-exclamation-triangle-fill","me-2"]],template:function(e,c){e&1&&(t(0,"div",0),b(1,N,39,12,"div",1)(2,k,3,0,"div",2)(3,R,3,1,"div",3),n()),e&2&&(r(),l("ngIf",c.componente),r(),l("ngIf",!c.componente&&!c.error),r(),l("ngIf",c.error))},dependencies:[D,S,y,M],styles:["img[_ngcontent-%COMP%]{object-fit:cover;max-height:350px}h2[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}ul[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:1rem}"]})};export{U as DetalleComponenteComponent};
