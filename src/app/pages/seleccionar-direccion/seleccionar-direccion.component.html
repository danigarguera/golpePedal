<div class="container py-4">
  <h2 class="texto-grande fw-bold mb-4">
    <i class="bi bi-geo-alt-fill me-2"></i> Selecciona una dirección para el envío
  </h2>

  <!-- Lista de direcciones -->
  <div *ngIf="direcciones.length > 0; else sinDirecciones">
    <div class="row row-cols-1 row-cols-md-2 g-4 mt-3">
      <div class="col" *ngFor="let direccion of direcciones">
        <div class="card sombra-suave borde-claro h-100">
          <div class="card-body">
            <h5 class="card-title fw-semibold">{{ direccion.alias }}</h5>
            <p class="card-text text-muted mb-3">
              {{ direccion.calle }}, {{ direccion.numero }}
              <span *ngIf="direccion.piso">, piso {{ direccion.piso }}</span><br>
              {{ direccion.codigoPostal }} {{ direccion.ciudad }} ({{ direccion.provincia }})<br>
              {{ direccion.pais }}
            </p>
            <button class="btn btn-primario w-100" (click)="seleccionarDireccion(direccion)">
              <i class="bi bi-check-circle-fill me-1"></i> Usar esta dirección
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mensaje si no hay direcciones -->
  <ng-template #sinDirecciones>
    <div class="alert alert-info sombra-suave mt-4">
      No tienes direcciones guardadas. Añade una nueva abajo.
    </div>
  </ng-template>

  <!-- Formulario para nueva dirección -->
  <div class="mt-5">
    <h4 class="mb-3"><i class="bi bi-plus-circle-fill me-2"></i>Añadir nueva dirección</h4>
    <form (ngSubmit)="crearDireccion()" #direccionForm="ngForm" class="sombra-suave p-4 rounded-3 bg-white borde-claro">
      <div class="row g-3">
        <div class="col-md-6">
          <label for="alias" class="form-label">Alias</label>
          <input type="text" id="alias" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.alias" name="alias" required>
        </div>
        <div class="col-md-6">
          <label for="calle" class="form-label">Calle</label>
          <input type="text" id="calle" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.calle" name="calle" required>
        </div>
        <div class="col-md-3">
          <label for="numero" class="form-label">Número</label>
          <input type="text" id="numero" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.numero" name="numero" required>
        </div>
        <div class="col-md-3">
          <label for="piso" class="form-label">Piso (opcional)</label>
          <input type="text" id="piso" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.piso" name="piso">
        </div>
        <div class="col-md-3">
          <label for="ciudad" class="form-label">Ciudad</label>
          <input type="text" id="ciudad" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.ciudad" name="ciudad" required>
        </div>
        <div class="col-md-3">
          <label for="provincia" class="form-label">Provincia</label>
          <input type="text" id="provincia" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.provincia" name="provincia" required>
        </div>
        <div class="col-md-3">
          <label for="codigoPostal" class="form-label">Código Postal</label>
          <input type="text" id="codigoPostal" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.codigoPostal" name="codigoPostal" required>
        </div>
        <div class="col-md-3">
          <label for="pais" class="form-label">País</label>
          <input type="text" id="pais" class="form-control input-estilizado" [(ngModel)]="nuevaDireccion.pais" name="pais" required>
        </div>
        <div class="col-12 text-end mt-3">
          <button type="submit" class="btn btn-secundario">
            <i class="bi bi-save me-1"></i> Guardar dirección
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
