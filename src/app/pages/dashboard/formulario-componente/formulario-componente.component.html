<div class="container mt-4">
  <h2>{{ modoEdicion ? 'Editar' : 'Nuevo' }} Componente</h2>

  <form [formGroup]="formulario" (ngSubmit)="guardar()">
    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre</label>
      <input id="nombre" type="text" class="form-control" formControlName="nombre">
      <div *ngIf="formulario.get('nombre')?.invalid && formulario.get('nombre')?.touched" class="text-danger">
        El nombre es obligatorio.
      </div>
    </div>

    <div class="mb-3">
      <label for="descripcion" class="form-label">Descripción</label>
      <textarea id="descripcion" rows="3" class="form-control" formControlName="descripcion"></textarea>
      <div *ngIf="formulario.get('descripcion')?.invalid && formulario.get('descripcion')?.touched" class="text-danger">
        La descripción es obligatoria.
      </div>
    </div>

    <div class="mb-3">
      <label for="precio" class="form-label">Precio (€)</label>
      <input id="precio" type="number" class="form-control" formControlName="precio" min="0.01" step="0.01">
      <div *ngIf="formulario.get('precio')?.invalid && formulario.get('precio')?.touched" class="text-danger">
        Introduce un precio válido.
      </div>
    </div>

    <div class="mb-3">
      <label for="tipoComponenteId" class="form-label">Tipo de Componente</label>
      <select class="form-select" formControlName="tipoComponenteId">
        <option [value]="null">-- Seleccionar --</option>
        <option *ngFor="let tipo of tiposComponente" [value]="tipo.id">{{ tipo.nombre }}</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="marcaId" class="form-label">Marca</label>
      <select class="form-select" formControlName="marcaId">
        <option [value]="null">-- Seleccionar --</option>
        <option *ngFor="let marca of marcas" [value]="marca.id">{{ marca.nombre }}</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="tipoBicicletaId" class="form-label">Tipo de Bicicleta</label>
      <select class="form-select" formControlName="tipoBicicletaId">
        <option [value]="null">-- Seleccionar --</option>
        <option *ngFor="let tipoBici of tiposBicicleta" [value]="tipoBici.id">{{ tipoBici.nombre }}</option>
      </select>
    </div>

    <div class="d-flex justify-content-between">
      <button type="submit" class="btn btn-success" [disabled]="formulario.invalid">
        {{ modoEdicion ? 'Actualizar' : 'Crear' }}
      </button>
      <a class="btn btn-secondary" routerLink="/dashboard/componentes">Cancelar</a>
    </div>
  </form>
</div>
