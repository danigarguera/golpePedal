<div class="container mt-4" *ngIf="pedido">
  <!-- Cabecera -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="texto-grande fw-bold">Factura del pedido #{{ pedido.id }}</h2>
    <button class="btn btn-outline-dark d-print-none" (click)="imprimir()">
      <i class="bi bi-printer"></i> Imprimir
    </button>
  </div>

  <!-- Fecha y Estado -->
  <div class="mb-3">
    <p><strong>Fecha:</strong> {{ pedido.fecha | date:'short' }}</p>
    <p><strong>Estado:</strong> {{ pedido.estado }}</p>
  </div>

  <div class="row align-items-start mb-4 datos-impresion">
    <div class="col-12 col-md-8 cliente-info">
      <div class="p-3 rounded border bg-white">
        <h5 class="fw-semibold">Datos del cliente</h5>
        <p>
          {{ pedido.usuario.nombre }} {{ pedido.usuario.apellido1 }} {{ pedido.usuario.apellido2 }}<br>
          {{ pedido.usuario.email }}<br>
          {{ pedido.usuario.telefono }}
        </p>

        <h5 class="fw-semibold mt-4">Dirección de envío</h5>
        <address class="mb-0">
          {{ pedido.direccion.alias }}<br>
          {{ pedido.direccion.calle }}, {{ pedido.direccion.numero }}
          <span *ngIf="pedido.direccion.piso">, piso {{ pedido.direccion.piso }}</span><br>
          {{ pedido.direccion.codigoPostal }} {{ pedido.direccion.ciudad }} ({{ pedido.direccion.provincia }})<br>
          {{ pedido.direccion.pais }}
        </address>
      </div>
    </div>

    <div class="col-12 col-md-4 text-md-end text-center mt-4 mt-md-0">
      <img src="assets/logos/LogoNaranjaBueno.png" alt="Logo Golpe de Pedal" class="logo-factura" />
    </div>
  </div>



  <!-- Productos -->
  <div class="card sombra-suave borde-claro rounded-3 mb-4">
    <div class="card-header bg-light fw-semibold">Productos</div>
    <div class="card-body p-0">
      <table class="table table-bordered table-sm mb-0">
        <thead class="table-light">
          <tr>
            <th>Producto</th>
            <th class="text-center">Cantidad</th>
            <th class="text-end">Precio unitario</th>
            <th class="text-end">Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let linea of pedido.lineas">
            <td>{{ linea.nombre }}</td>
            <td class="text-center">{{ linea.cantidad }}</td>
            <td class="text-end">{{ linea.precioUnitario | currency:'EUR':'symbol':'1.2-2':'es-ES' }}</td>
            <td class="text-end">
              {{ linea.precioUnitario * linea.cantidad | currency:'EUR':'symbol':'1.2-2':'es-ES' }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Total -->
  <div class="text-end mb-4">
    <h5 class="fw-bold">
      Total: {{ pedido.total | currency:'EUR':'symbol':'1.2-2':'es-ES' }}
    </h5>
  </div>

  <!-- Mensaje final -->
  <div class="text-center text-muted small mt-4">
    Gracias por confiar en Golpe de Pedal<br>
    Si tienes dudas sobre tu pedido, contáctanos en soporte&#64;golpedepedal.com
  </div>
</div>